<div class="ngx-carousel-container"
     [ngStyle]="{
                height: height,
                width: width
              }"
     [ngxCarouselKeyEvents]="useKeyboard"
     [ngxCarouselMouseWheelEvents]="useMouseWheel"
     (onMouseEnter)="onMouseEnter()"
     (onMouseLeave)="onMouseLeave()"
     (right)="next()"
     (left)="previous()">
  <div *ngIf="stepList.length"
       class="ngx-carousel {{animation ? carouselAnimationClass : null}}"
       [class.overflow-hidden]="hideOverFlow">
    <div *ngFor="let step of stepList; let stepIndex = index;"
         ngxCarouselSwipe
         (right)="next()"
         (left)="previous()"
         class="ngx-carousel-step ngx-carousel-step-{{stepIndex}} {{step.classes}}
        {{(animation && applyAnimationToSteps && step.animation) ? carouselAnimationClass : null}}"
         [ngStyle]="{
                    height: height,
                    'background-image': step.bgImage ? step.bgImage : '',
                    'background-color': step.bgColor,
                    'background-size': step.backgroundSize || stepBackgroundSize
                  }"
         [ngClass]="{
                    'display-none': stepIndex !== selectedIndex,
                    'display-block': stepIndex === selectedIndex,
                    'image-background-style': !!step.bgImage
                  }"
         #stepEleRef>
      <div class="ngx-carousel-step-content"
           [ngStyle]="{
            'height.px': stepEleRef.offsetHeight - 40,
            color: step.bgColor ? getButtonTextColor(step.bgColor) : ''
         }">
        <ng-container *ngTemplateOutlet="step.stepContentDirectiveTemplateRef?.templateRef"></ng-container>
      </div>
      <div class="ngx-carousel-step-caption"
           [ngStyle]="{
            color: step.bgColor ? getButtonTextColor(step.bgColor) : ''
         }" *ngIf="step.stepCaptionDirectiveTemplateRef?.templateRef">
        <ng-container *ngTemplateOutlet="step.stepCaptionDirectiveTemplateRef?.templateRef"></ng-container>
      </div>
      <div *ngIf="!step.hideOverlay"
           class="ngx-carousel-step-overlay"
           [style.background-color]="step.overlayColor"
           [style.opacity]="step.overlayOpacity">
      </div>
    </div>
  </div>

  <!--next and previous button start-->
  <ng-container *ngIf="showControls">
    <a class="ngx-carousel-previous-button previous-button {{previousButtonClass}}"
       *ngIf="loop || selectedIndex !== 0"
       [ngClass]="{
                  'previous-button-outside': outsideButton,
                  'allow-button-animation': allowButtonAnimation
                }"
       (click)="previous()">
      <ng-container *ngIf="!previousButtonDirectiveTemplateRef">
      <span class="icon-span" [ngStyle]="{
          'background-color': selectedStep?.buttonBg || buttonBg || '#FFFFFF',
          color: getButtonTextColor(selectedStep?.buttonBg || buttonBg || '#FFFFFF')
        }">
        <i class="{{previousButtonIconClass}}"></i>
      </span>
      </ng-container>
      <ng-container *ngIf="previousButtonDirectiveTemplateRef?.templateRef">
        <ng-container *ngTemplateOutlet="previousButtonDirectiveTemplateRef?.templateRef"></ng-container>
      </ng-container>
    </a>
    <a class="ngx-carousel-previous-button next-button {{nextButtonClass}}"
       *ngIf="loop || selectedIndex !== stepList.length - 1"
       [ngClass]="{
                  'next-button-outside': outsideButton,
                  'allow-button-animation': allowButtonAnimation
                }"
       (click)="next()">
      <ng-container *ngIf="!nextButtonDirectiveTemplateRef">
      <span class="icon-span" [ngStyle]="{
          'background-color': selectedStep?.buttonBg || buttonBg || '#FFFFFF',
          color: getButtonTextColor(selectedStep?.buttonBg || buttonBg || '#FFFFFF')
        }">
        <i class="{{nextButtonIconClass}}"></i>
      </span>
      </ng-container>
      <ng-container *ngIf="nextButtonDirectiveTemplateRef?.templateRef">
        <ng-container *ngTemplateOutlet="nextButtonDirectiveTemplateRef?.templateRef"></ng-container>
      </ng-container>
    </a>
  </ng-container>
  <!--next and previous button end-->

  <!--dots start-->
  <ng-container *ngIf="showDots">
    <div class="ngx-carousel-dot-container">
      <span *ngFor="let step of stepList; let stepIndex = index;"
            [style.background-color]="dotsBg"
            [class.active]="stepIndex === selectedIndex"
            [class.ngx-carousel-indicator]="dotsType === 'box'"
            [class.ngx-carousel-dot]="dotsType === 'dot'"
            class="{{dotsClass}}" (click)="slideTo(stepIndex)">
      </span>
    </div>
  </ng-container>
  <!--dots end-->
</div>
